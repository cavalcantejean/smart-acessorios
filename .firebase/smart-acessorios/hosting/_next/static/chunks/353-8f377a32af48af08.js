(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[353],{353:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,6874,23)),Promise.resolve().then(t.bind(t,73325))},5845:(e,r,t)=>{"use strict";t.d(r,{i:()=>o});var a=t(12115),s=t(39033);function o({prop:e,defaultProp:r,onChange:t=()=>{}}){let[o,i]=function({defaultProp:e,onChange:r}){let t=a.useState(e),[o]=t,i=a.useRef(o),n=(0,s.c)(r);return a.useEffect(()=>{i.current!==o&&(n(o),i.current=o)},[o,i,n]),t}({defaultProp:r,onChange:t}),n=void 0!==e,l=n?e:o,c=(0,s.c)(t);return[l,a.useCallback(r=>{if(n){let t="function"==typeof r?r(e):r;t!==e&&c(t)}else i(r)},[n,e,i,c])]}},11275:(e,r,t)=>{"use strict";t.d(r,{X:()=>o});var a=t(12115),s=t(52712);function o(e){let[r,t]=a.useState(void 0);return(0,s.N)(()=>{if(e){t({width:e.offsetWidth,height:e.offsetHeight});let r=new ResizeObserver(r=>{let a,s;if(!Array.isArray(r)||!r.length)return;let o=r[0];if("borderBoxSize"in o){let e=o.borderBoxSize,r=Array.isArray(e)?e[0]:e;a=r.inlineSize,s=r.blockSize}else a=e.offsetWidth,s=e.offsetHeight;t({width:a,height:s})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}t(void 0)},[e]),r}},30285:(e,r,t)=>{"use strict";t.d(r,{$:()=>c,r:()=>l});var a=t(95155),s=t(12115),o=t(99708),i=t(74466),n=t(59434);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,r)=>{let{className:t,variant:s,size:i,asChild:c=!1,...d}=e,u=c?o.DX:"button";return(0,a.jsx)(u,{className:(0,n.cn)(l({variant:s,size:i,className:t})),ref:r,...d})});c.displayName="Button"},34477:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),!function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{callServer:function(){return a.callServer},createServerReference:function(){return o},findSourceMapURL:function(){return s.findSourceMapURL}});let a=t(53806),s=t(31818),o=t(34979).createServerReference},35695:(e,r,t)=>{"use strict";var a=t(18999);t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},39033:(e,r,t)=>{"use strict";t.d(r,{c:()=>s});var a=t(12115);function s(e){let r=a.useRef(e);return a.useEffect(()=>{r.current=e}),a.useMemo(()=>(...e)=>r.current?.(...e),[])}},45503:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});var a=t(12115);function s(e){let r=a.useRef({value:e,previous:e});return a.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}},46081:(e,r,t)=>{"use strict";t.d(r,{A:()=>i,q:()=>o});var a=t(12115),s=t(95155);function o(e,r){let t=a.createContext(r),o=e=>{let{children:r,...o}=e,i=a.useMemo(()=>o,Object.values(o));return(0,s.jsx)(t.Provider,{value:i,children:r})};return o.displayName=e+"Provider",[o,function(s){let o=a.useContext(t);if(o)return o;if(void 0!==r)return r;throw Error(`\`${s}\` must be used within \`${e}\``)}]}function i(e,r=[]){let t=[],o=()=>{let r=t.map(e=>a.createContext(e));return function(t){let s=t?.[e]||r;return a.useMemo(()=>({[`__scope${e}`]:{...t,[e]:s}}),[t,s])}};return o.scopeName=e,[function(r,o){let i=a.createContext(o),n=t.length;t=[...t,o];let l=r=>{let{scope:t,children:o,...l}=r,c=t?.[e]?.[n]||i,d=a.useMemo(()=>l,Object.values(l));return(0,s.jsx)(c.Provider,{value:d,children:o})};return l.displayName=r+"Provider",[l,function(t,s){let l=s?.[e]?.[n]||i,c=a.useContext(l);if(c)return c;if(void 0!==o)return o;throw Error(`\`${t}\` must be used within \`${r}\``)}]},function(...e){let r=e[0];if(1===e.length)return r;let t=()=>{let t=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let s=t.reduce((r,{useScope:t,scopeName:a})=>{let s=t(e)[`__scope${a}`];return{...r,...s}},{});return a.useMemo(()=>({[`__scope${r.scopeName}`]:s}),[s])}};return t.scopeName=r.scopeName,t}(o,...r)]}},52712:(e,r,t)=>{"use strict";t.d(r,{N:()=>s});var a=t(12115),s=globalThis?.document?a.useLayoutEffect:()=>{}},56104:(e,r,t)=>{"use strict";let a,s,o;t.d(r,{db:()=>s,j:()=>o});var i=t(23915),n=t(35317),l=t(93004);try{console.log("Attempting Firebase initialization..."),0===(0,i.Dk)().length?(a=(0,i.Wp)({apiKey:"AIzaSyCXVzd3bIG1cNsMZ4nPElKkuu_vE9YS-Ys",authDomain:"smart-acessorios.firebaseapp.com",projectId:"smart-acessorios",storageBucket:"smart-acessorios.firebasestorage.app",messagingSenderId:"782394541540",appId:"1:782394541540:web:942c2d58693c497e9573f1",measurementId:"G-ECBEQKZV53"}),console.log("Firebase app initialized successfully in firebase.ts.")):(a=(0,i.Sx)(),console.log("Firebase app already initialized, getting existing app in firebase.ts.")),s=(0,n.aU)(a),o=(0,l.xI)(a),s?console.log("Firestore 'db' instance obtained successfully in firebase.ts."):console.error("!!! Critical Error: Firestore 'db' instance is NULL or UNDEFINED after getFirestore(app) in firebase.ts !!!"),o?console.log("Firebase Auth 'auth' instance obtained successfully in firebase.ts."):console.error("!!! Critical Error: Firebase Auth 'auth' instance is NULL or UNDEFINED after getAuth(app) in firebase.ts !!!")}catch(e){console.error("!!! Firebase/Firestore/Auth Initialization Error in firebase.ts !!!"),e instanceof Error?(console.error("Error Name:",e.name),console.error("Error Message:",e.message),console.error("Error Stack:",e.stack)):console.error("Raw Error Object during Firebase init in firebase.ts:",e)}},59119:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(40157).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},59434:(e,r,t)=>{"use strict";t.d(r,{cn:()=>o});var a=t(52596),s=t(39688);function o(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.$)(r))}},62523:(e,r,t)=>{"use strict";t.d(r,{p:()=>i});var a=t(95155),s=t(12115),o=t(59434);let i=s.forwardRef((e,r)=>{let{className:t,type:s,...i}=e;return(0,a.jsx)("input",{type:s,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...i})});i.displayName="Input"},66681:(e,r,t)=>{"use strict";t.d(r,{A:()=>d,AuthProvider:()=>c});var a=t(12115),s=t(56104),o=t(93004),i=t(35317),n=t(35695);let l=(0,a.createContext)(void 0);function c(e){var r;let{children:t}=e,[c,d]=(0,a.useState)(null),[u,m]=(0,a.useState)(null),[f,p]=(0,a.useState)(!0),h=(0,n.useRouter)(),g=(0,a.useCallback)(async e=>{console.log("useAuth: processAuthStateChange TRIGGERED. fbUser UID:",e?e.uid:"null"),p(!0);try{if(e){console.log("useAuth: fbUser detected. Setting firebaseUser state for UID:",e.uid),m(e),console.log("useAuth: Fetching Firestore data for UID:",e.uid);let r=(0,i.H9)(s.db,"usuarios",e.uid),t=await (0,i.x7)(r);if(t.exists()){let r=t.data(),a={id:e.uid,email:e.email,name:r.name||e.displayName||"Usu\xe1rio",isAdmin:r.isAdmin||!1};console.log("useAuth: Firestore data found & AuthUser set for UID: ".concat(e.uid,", Name: ").concat(a.name,", Admin: ").concat(a.isAdmin)),d(a)}else if(console.warn("useAuth: User ".concat(e.uid," authenticated (Firebase Auth) but NO Firestore document.")),e.providerData.some(e=>e.providerId===o.HF.PROVIDER_ID)){console.log("useAuth: User ".concat(e.uid," is a new social login (e.g., Google). Creating Firestore document."));let t={id:e.uid,name:e.displayName||"Usu\xe1rio Social",email:e.email||"email.social@desconhecido.com",isAdmin:!1,avatarUrl:e.photoURL||"https://placehold.co/150x150.png?text=".concat((e.displayName||"S").charAt(0).toUpperCase()),avatarHint:"user avatar social",bio:"Novo membro via login social!"};await (0,i.BN)(r,{...t,createdAt:(0,i.O5)(),updatedAt:(0,i.O5)()}),console.log("useAuth: Firestore document CREATED for new social user: ".concat(e.uid));let a={id:t.id,email:t.email,name:t.name,isAdmin:t.isAdmin};d(a)}else console.warn("useAuth: User ".concat(e.uid," authenticated via non-social method but NO Firestore document. Forcing logout.")),await (0,o.CI)(s.j)}else console.log("useAuth: No Firebase user (logged out or initial state). Clearing authUser and firebaseUser states."),d(null),m(null)}catch(e){if(console.error("useAuth: CRITICAL ERROR inside processAuthStateChange:",e),d(null),m(null),s.j.currentUser){console.log("useAuth: Attempting to sign out Firebase user due to error in processAuthStateChange.");try{await (0,o.CI)(s.j)}catch(e){console.error("useAuth: Error attempting to sign out Firebase user after error in processAuthStateChange:",e)}}}finally{console.log("useAuth: processAuthStateChange - Bloco FINALLY. Definindo isLoading para FALSE."),p(!1)}},[]);(0,a.useEffect)(()=>{console.log("useAuth: Setting up onAuthStateChanged listener.");let e=(0,o.hg)(s.j,e=>{g(e)});return()=>{console.log("useAuth: Cleaning up onAuthStateChanged listener (AuthProvider unmounted)."),e()}},[g]);let v=(0,a.useCallback)(async()=>{console.log("useAuth: logout function called."),p(!0);try{await (0,o.CI)(s.j),console.log("useAuth: signOut successful. Navigating to homepage."),h.push("/")}catch(e){console.error("useAuth: Error during signOut: ",e),p(!1)}},[h]),x=(0,a.useCallback)(async()=>{console.log("useAuth: refreshAuthUser called.");let e=s.j.currentUser;console.log("useAuth: refreshAuthUser - current Firebase user from auth.currentUser:",e?e.uid:"null"),await g(e)},[g]),b=!f&&!!c&&!!u,j=!f&&null!=(r=null==c?void 0:c.isAdmin)&&r;return a.createElement(l.Provider,{value:{user:c,firebaseUser:u,isAuthenticated:b,isAdmin:j,isLoading:f,logout:v,refreshAuthUser:x}},t)}function d(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},73325:(e,r,t)=>{"use strict";t.d(r,{default:()=>q});var a=t(95155),s=t(90221),o=t(62177),i=t(55594);let n=i.z.object({name:i.z.string().min(3,"O nome deve ter pelo menos 3 caracteres."),shortDescription:i.z.string().min(10,"A descri\xe7\xe3o curta deve ter pelo menos 10 caracteres."),fullDescription:i.z.string().min(20,"A descri\xe7\xe3o completa deve ter pelo menos 20 caracteres."),imageUrl:i.z.string().url("URL da imagem inv\xe1lida.").min(1,"URL da imagem \xe9 obrigat\xf3ria."),imageHint:i.z.string().optional(),affiliateLink:i.z.string().url("Link de afiliado inv\xe1lido.").min(1,"Link de afiliado \xe9 obrigat\xf3rio."),price:i.z.string().optional().refine(e=>{if(null==e||""===e.trim())return!0;let r=parseFloat(e.replace(",","."));return!isNaN(r)&&r>=0},{message:"Pre\xe7o inv\xe1lido. Deve ser um n\xfamero positivo. Use formato como 12,99 ou 12.99"}),category:i.z.string().optional(),isDeal:i.z.boolean().optional().default(!1),aiSummary:i.z.string().optional(),embedHtml:i.z.string().optional()});var l=t(30285),c=t(75937),d=t(62523),u=t(88539),m=t(12115),f=t(85185),p=t(6101),h=t(46081),g=t(5845),v=t(45503),x=t(11275),b=t(63655),j="Switch",[y,A]=(0,h.A)(j),[S,N]=y(j),w=m.forwardRef((e,r)=>{let{__scopeSwitch:t,name:s,checked:o,defaultChecked:i,required:n,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=e,[v,x]=m.useState(null),j=(0,p.s)(r,e=>x(e)),y=m.useRef(!1),A=!v||u||!!v.closest("form"),[N=!1,w]=(0,g.i)({prop:o,defaultProp:i,onChange:d});return(0,a.jsxs)(S,{scope:t,checked:N,disabled:l,children:[(0,a.jsx)(b.sG.button,{type:"button",role:"switch","aria-checked":N,"aria-required":n,"data-state":E(N),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:j,onClick:(0,f.m)(e.onClick,e=>{w(e=>!e),A&&(y.current=e.isPropagationStopped(),y.current||e.stopPropagation())})}),A&&(0,a.jsx)(I,{control:v,bubbles:!y.current,name:s,value:c,checked:N,required:n,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});w.displayName=j;var R="SwitchThumb",C=m.forwardRef((e,r)=>{let{__scopeSwitch:t,...s}=e,o=N(R,t);return(0,a.jsx)(b.sG.span,{"data-state":E(o.checked),"data-disabled":o.disabled?"":void 0,...s,ref:r})});C.displayName=R;var I=e=>{let{control:r,checked:t,bubbles:s=!0,...o}=e,i=m.useRef(null),n=(0,v.Z)(t),l=(0,x.X)(r);return m.useEffect(()=>{let e=i.current,r=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(n!==t&&r){let a=new Event("click",{bubbles:s});r.call(e,t),e.dispatchEvent(a)}},[n,t,s]),(0,a.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...o,tabIndex:-1,ref:i,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function E(e){return e?"checked":"unchecked"}var U=t(59434);let D=m.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(w,{className:(0,U.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...s,ref:r,children:(0,a.jsx)(C,{className:(0,U.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});D.displayName=w.displayName;var F=t(87481),k=t(50172),M=t(59119);let z=(0,t(40157).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var P=t(35695),O=t(66766),T=t(66681),L=t(47650),_=t(34477);let V=(0,_.createServerReference)("700ad7569caae975be482c2df9475873d0bed531c9",_.callServer,void 0,_.findSourceMapURL,"updateAccessoryAction"),B=(0,_.createServerReference)("60ccfcf1443b65ee3eacb571c2586229228acb8111",_.callServer,void 0,_.findSourceMapURL,"addAccessoryAction"),H=(0,_.createServerReference)("60ddef7fa2350ca2eddcd977db91fe9b99cea181ca",_.callServer,void 0,_.findSourceMapURL,"generateDescriptionAction"),J=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:800,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.7;return new Promise((s,o)=>{let i=new FileReader;i.onload=e=>{var i;let n=document.createElement("img");n.onload=()=>{let e=document.createElement("canvas"),{width:i,height:l}=n;i>l?i>r&&(l=Math.round(l*r/i),i=r):l>t&&(i=Math.round(i*t/l),l=t),e.width=i,e.height=l;let c=e.getContext("2d");if(!c)return o(Error("Could not get canvas context"));c.drawImage(n,0,0,i,l),s(e.toDataURL("image/jpeg",a))},n.onerror=o,(null==(i=e.target)?void 0:i.result)?n.src=e.target.result:o(Error("Failed to read image file."))},i.onerror=o,i.readAsDataURL(e)})},G=e=>{let r;if(!e)return!1;try{r=new URL(e)}catch(e){return!1}return"http:"===r.protocol||"https:"===r.protocol},$=e=>!!e&&e.startsWith("data:image/");function q(e){let{initialData:r,submitButtonText:t="Salvar Acess\xf3rio"}=e,{toast:i}=(0,F.dj)(),f=(0,P.useRouter)(),p=(0,m.useRef)(null),[h,g]=(0,m.useState)((null==r?void 0:r.imageUrl)||null),[v,x]=(0,m.useState)(!1),{user:b,isAuthenticated:j}=(0,T.A)(),[y,A]=(0,L.useFormState)((null==r?void 0:r.id)?V.bind(null,r.id):B,void 0),[S,N]=(0,L.useFormState)(H,void 0),[w,R]=(0,m.useState)(!1),C=(0,o.mN)({resolver:(0,s.u)(n),defaultValues:r?{...r,price:String(r.price||"")}:{name:"",shortDescription:"",fullDescription:"",imageUrl:"",imageHint:"",affiliateLink:"",price:"",category:"",isDeal:!1,aiSummary:"",embedHtml:""}});(0,m.useEffect)(()=>{(null==r?void 0:r.imageUrl)&&g(r.imageUrl)},[null==r?void 0:r.imageUrl]),(0,m.useEffect)(()=>{if(null==y?void 0:y.success)i({title:"Sucesso!",description:y.message}),!y.accessory||(null==r?void 0:r.id)?(null==r?void 0:r.id)&&f.push("/admin/accessories"):(C.reset(),g(null),p.current&&(p.current.value=""));else if(null==y?void 0:y.error){let e="Ocorreu um erro.";if("string"==typeof y.error?e=y.error:"object"==typeof y.error&&(e=Object.values(y.error).flat()[0]||"Verifique os campos do formul\xe1rio."),i({title:"Erro ao Salvar",description:e,variant:"destructive"}),"object"==typeof y.error)for(let[e,r]of Object.entries(y.error))r&&r.length>0&&C.setError(e,{type:"server",message:r[0]})}},[y,C,f,i,null==r?void 0:r.id]),(0,m.useEffect)(()=>{(null==S?void 0:S.success)&&S.description?(C.setValue("fullDescription",S.description,{shouldValidate:!0}),i({title:"Sucesso!",description:"Descri\xe7\xe3o gerada por IA e inserida no campo 'Descri\xe7\xe3o Completa'."})):(null==S?void 0:S.error)&&i({title:"Erro ao Gerar Descri\xe7\xe3o",description:S.error,variant:"destructive"}),S&&R(!1)},[S,C,i]);let I=async e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(a){x(!0);try{let e=await J(a);g(e),C.setValue("imageUrl",e,{shouldValidate:!0}),i({title:"Imagem Carregada",description:"Pr\xe9-visualiza\xe7\xe3o da imagem atualizada."})}catch(e){console.error("Error processing image:",e),i({title:"Erro de Imagem",description:"Falha ao processar imagem.",variant:"destructive"}),g((null==r?void 0:r.imageUrl)||null),C.setValue("imageUrl",(null==r?void 0:r.imageUrl)||C.getValues("imageUrl")||"",{shouldValidate:!0})}finally{x(!1)}}},E=async()=>{let e=C.getValues("name"),r=C.getValues("shortDescription"),t=C.getValues("category");if(!e&&!r)return void i({title:"Faltam Informa\xe7\xf5es",description:"Forne\xe7a pelo menos o nome ou a descri\xe7\xe3o curta para gerar a descri\xe7\xe3o completa.",variant:"warning"});R(!0);let a=new FormData;a.append("productInfo","Nome: ".concat(e,", Categoria: ").concat(t,", Detalhes: ").concat(r)),N(a)},U=h&&(G(h)||$(h))?h:null;return(0,a.jsx)(c.lV,{...C,children:(0,a.jsxs)("form",{onSubmit:C.handleSubmit(async e=>{let r=new FormData;for(let t in e){let a=e[t];null!=a&&("boolean"==typeof a?r.append(t,a?"true":"false"):a instanceof FileList||r.append(t,String(a)))}let t=C.getValues("imageUrl");t?r.set("imageUrl",t):h&&r.set("imageUrl",h),await A(r)}),className:"space-y-8",children:[(null==y?void 0:y.error)&&"string"==typeof y.error&&(0,a.jsx)("div",{className:"p-3 text-sm text-destructive bg-red-100 border border-destructive rounded-md",children:y.error}),(0,a.jsx)(c.zB,{control:C.control,name:"name",render:e=>{let{field:r}=e;return(0,a.jsxs)(c.eI,{children:[(0,a.jsx)(c.lR,{children:"Nome do Acess\xf3rio"}),(0,a.jsx)(c.MJ,{children:(0,a.jsx)(d.p,{placeholder:"Ex: Carregador Sem Fio R\xe1pido",...r})}),(0,a.jsx)(c.C5,{})]})}}),(0,a.jsx)(c.zB,{control:C.control,name:"shortDescription",render:e=>{let{field:r}=e;return(0,a.jsxs)(c.eI,{children:[(0,a.jsx)(c.lR,{children:"Descri\xe7\xe3o Curta"}),(0,a.jsx)(c.MJ,{children:(0,a.jsx)(u.T,{placeholder:"Uma breve descri\xe7\xe3o (aparece no card)",...r,rows:2})}),(0,a.jsx)(c.C5,{})]})}}),(0,a.jsx)(c.zB,{control:C.control,name:"fullDescription",render:e=>{let{field:r}=e;return(0,a.jsxs)(c.eI,{children:[(0,a.jsx)(c.lR,{children:"Descri\xe7\xe3o Completa"}),(0,a.jsx)(c.MJ,{children:(0,a.jsx)(u.T,{placeholder:"Descri\xe7\xe3o detalhada do produto (aparece na p\xe1gina do acess\xf3rio)",...r,rows:5})}),(0,a.jsxs)(l.$,{type:"button",variant:"outline",size:"sm",onClick:E,disabled:w||!C.watch("name")&&!C.watch("shortDescription"),className:"mt-2",children:[w?(0,a.jsx)(k.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(z,{className:"mr-2 h-4 w-4"}),"Gerar Descri\xe7\xe3o com IA"]}),(0,a.jsx)(c.Rr,{children:"Clique para gerar uma descri\xe7\xe3o completa usando Intelig\xeancia Artificial com base no nome, categoria e descri\xe7\xe3o curta."}),(0,a.jsx)(c.C5,{})]})}}),(0,a.jsx)(c.zB,{control:C.control,name:"embedHtml",render:e=>{let{field:r}=e;return(0,a.jsxs)(c.eI,{children:[(0,a.jsx)(c.lR,{children:"HTML de Embed (Opcional)"}),(0,a.jsx)(c.MJ,{children:(0,a.jsx)(u.T,{placeholder:"Cole o c\xf3digo HTML de embed aqui (ex: v\xeddeo do YouTube, mapa)",...r,value:r.value||"",rows:4})}),(0,a.jsx)(c.Rr,{children:"Insira o c\xf3digo HTML completo para incorporar conte\xfado externo (ex: iframes)."}),(0,a.jsx)(c.C5,{})]})}}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(c.lR,{children:"Imagem Principal"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-start",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(c.eI,{children:[(0,a.jsx)(c.lR,{htmlFor:"imageUpload",className:"text-sm font-normal text-muted-foreground",children:"Subir Imagem (Recomendado)"}),(0,a.jsx)(c.MJ,{children:(0,a.jsx)(d.p,{id:"imageUpload",type:"file",accept:"image/*",ref:p,onChange:I,className:"cursor-pointer",disabled:v})}),(0,a.jsx)(c.Rr,{children:"Selecione um arquivo de imagem (ex: JPG, PNG). Ele ser\xe1 redimensionado e comprimido."}),v&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground flex items-center",children:[(0,a.jsx)(k.A,{className:"mr-2 h-4 w-4 animate-spin"})," Processando imagem..."]})]}),(0,a.jsx)(c.zB,{control:C.control,name:"imageUrl",render:e=>{let{field:r}=e;return(0,a.jsxs)(c.eI,{children:[(0,a.jsx)(c.lR,{className:"text-sm font-normal text-muted-foreground",children:"Ou Cole a URL da Imagem"}),(0,a.jsx)(c.MJ,{children:(0,a.jsx)(d.p,{type:"url",placeholder:"https://exemplo.com/imagem.png",...r,value:r.value||"",onChange:e=>{r.onChange(e),g(e.target.value)}})}),(0,a.jsx)(c.C5,{})," "]})}})]}),U&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.lR,{className:"text-sm font-normal text-muted-foreground",children:"Pr\xe9-visualiza\xe7\xe3o"}),(0,a.jsx)("div",{className:"relative aspect-video w-full max-w-sm border rounded-md overflow-hidden bg-muted",children:(0,a.jsx)(O.default,{src:U,alt:"Pr\xe9-visualiza\xe7\xe3o da imagem do acess\xf3rio",fill:!0,style:{objectFit:"contain"},sizes:"(max-width: 768px) 100vw, 50vw"})})]})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Nota: As imagens enviadas s\xe3o convertidas para um formato de dados (base64) e armazenadas. Para produ\xe7\xe3o, considere um servi\xe7o de upload dedicado."})]}),(0,a.jsx)(c.zB,{control:C.control,name:"imageHint",render:e=>{let{field:r}=e;return(0,a.jsxs)(c.eI,{children:[(0,a.jsx)(c.lR,{children:"Dica para IA da Imagem (1-2 palavras)"}),(0,a.jsx)(c.MJ,{children:(0,a.jsx)(d.p,{placeholder:"Ex: fone ouvido",...r,value:r.value||""})}),(0,a.jsx)(c.Rr,{children:"Usado para buscar imagens alternativas se necess\xe1rio."}),(0,a.jsx)(c.C5,{})]})}}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,a.jsx)(c.zB,{control:C.control,name:"affiliateLink",render:e=>{let{field:r}=e;return(0,a.jsxs)(c.eI,{children:[(0,a.jsx)(c.lR,{children:"Link de Afiliado"}),(0,a.jsx)(c.MJ,{children:(0,a.jsx)(d.p,{type:"url",placeholder:"https://loja.com/produto?tag=seu-id",...r,value:r.value||""})}),(0,a.jsx)(c.C5,{})]})}}),(0,a.jsx)(c.zB,{control:C.control,name:"price",render:e=>{let{field:r}=e;return(0,a.jsxs)(c.eI,{children:[(0,a.jsx)(c.lR,{children:"Pre\xe7o (Ex: 29,99)"}),(0,a.jsx)(c.MJ,{children:(0,a.jsx)(d.p,{placeholder:"29,99",...r,value:r.value||""})}),(0,a.jsx)(c.C5,{})]})}})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,a.jsx)(c.zB,{control:C.control,name:"category",render:e=>{let{field:r}=e;return(0,a.jsxs)(c.eI,{children:[(0,a.jsx)(c.lR,{children:"Categoria"}),(0,a.jsx)(c.MJ,{children:(0,a.jsx)(d.p,{placeholder:"Ex: Carregadores, Fones de Ouvido",...r,value:r.value||""})}),(0,a.jsx)(c.C5,{})]})}}),(0,a.jsx)(c.zB,{control:C.control,name:"isDeal",render:e=>{let{field:r}=e;return(0,a.jsxs)(c.eI,{className:"flex flex-col",children:[(0,a.jsx)(c.lR,{children:"\xc9 uma Oferta Especial?"}),(0,a.jsx)(c.MJ,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 h-10",children:[(0,a.jsx)(D,{id:"isDealSwitch",checked:r.value,onCheckedChange:r.onChange,onBlur:r.onBlur}),(0,a.jsx)(c.lR,{htmlFor:"isDealSwitch",className:"cursor-pointer",children:r.value?"Sim, \xe9 uma oferta":"N\xe3o \xe9 uma oferta"})]})}),(0,a.jsx)(c.Rr,{children:'Marque se este item deve aparecer na se\xe7\xe3o "Ofertas do Dia".'}),(0,a.jsx)(c.C5,{})]})}})]}),(0,a.jsx)(c.zB,{control:C.control,name:"aiSummary",render:e=>{let{field:r}=e;return(0,a.jsxs)(c.eI,{children:[(0,a.jsx)(c.lR,{children:"Resumo Gerado por IA (Opcional)"}),(0,a.jsx)(c.MJ,{children:(0,a.jsx)(u.T,{placeholder:"Resumo conciso, pode ser gerado por IA depois.",...r,rows:3,value:r.value||""})}),(0,a.jsx)(c.Rr,{children:"Se deixado em branco, o sistema pode tentar gerar um resumo automaticamente."}),(0,a.jsx)(c.C5,{})]})}}),(0,a.jsx)(function(e){let{buttonText:r}=e,{pending:t}=(0,L.useFormStatus)();return(0,a.jsxs)(l.$,{type:"submit",className:"w-full sm:w-auto",disabled:t||v,children:[t?(0,a.jsx)(k.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(M.A,{className:"mr-2 h-4 w-4"}),r]})},{buttonText:t})]})})}},75937:(e,r,t)=>{"use strict";t.d(r,{lV:()=>u,MJ:()=>x,Rr:()=>b,zB:()=>f,eI:()=>g,lR:()=>v,C5:()=>j});var a=t(95155),s=t(12115),o=t(99708),i=t(62177),n=t(59434),l=t(40968);let c=(0,t(74466).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(l.b,{ref:r,className:(0,n.cn)(c(),t),...s})});d.displayName=l.b.displayName;let u=i.Op,m=s.createContext({}),f=e=>{let{...r}=e;return(0,a.jsx)(m.Provider,{value:{name:r.name},children:(0,a.jsx)(i.xI,{...r})})},p=()=>{let e=s.useContext(m),r=s.useContext(h),{getFieldState:t,formState:a}=(0,i.xW)(),o=t(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=r;return{id:n,name:e.name,formItemId:"".concat(n,"-form-item"),formDescriptionId:"".concat(n,"-form-item-description"),formMessageId:"".concat(n,"-form-item-message"),...o}},h=s.createContext({}),g=s.forwardRef((e,r)=>{let{className:t,...o}=e,i=s.useId();return(0,a.jsx)(h.Provider,{value:{id:i},children:(0,a.jsx)("div",{ref:r,className:(0,n.cn)("space-y-2",t),...o})})});g.displayName="FormItem";let v=s.forwardRef((e,r)=>{let{className:t,...s}=e,{error:o,formItemId:i}=p();return(0,a.jsx)(d,{ref:r,className:(0,n.cn)(o&&"text-destructive",t),htmlFor:i,...s})});v.displayName="FormLabel";let x=s.forwardRef((e,r)=>{let{...t}=e,{error:s,formItemId:i,formDescriptionId:n,formMessageId:l}=p();return(0,a.jsx)(o.DX,{ref:r,id:i,"aria-describedby":s?"".concat(n," ").concat(l):"".concat(n),"aria-invalid":!!s,...t})});x.displayName="FormControl";let b=s.forwardRef((e,r)=>{let{className:t,...s}=e,{formDescriptionId:o}=p();return(0,a.jsx)("p",{ref:r,id:o,className:(0,n.cn)("text-sm text-muted-foreground",t),...s})});b.displayName="FormDescription";let j=s.forwardRef((e,r)=>{var t;let{className:s,children:o,...i}=e,{error:l,formMessageId:c}=p(),d=l?String(null!=(t=null==l?void 0:l.message)?t:""):o;return d?(0,a.jsx)("p",{ref:r,id:c,className:(0,n.cn)("text-sm font-medium text-destructive",s),...i,children:d}):null});j.displayName="FormMessage"},85185:(e,r,t)=>{"use strict";function a(e,r,{checkForDefaultPrevented:t=!0}={}){return function(a){if(e?.(a),!1===t||!a.defaultPrevented)return r?.(a)}}t.d(r,{m:()=>a})},87481:(e,r,t)=>{"use strict";t.d(r,{dj:()=>m});var a=t(12115);let s=0,o=new Map,i=e=>{if(o.has(e))return;let r=setTimeout(()=>{o.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);o.set(e,r)},n=(e,r)=>{switch(r.type){case"ADD_TOAST":return{...e,toasts:[r.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===r.toast.id?{...e,...r.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=r;return t?i(t):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===r.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==r.toastId)}}},l=[],c={toasts:[]};function d(e){c=n(c,e),l.forEach(e=>{e(c)})}function u(e){let{...r}=e,t=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:t});return d({type:"ADD_TOAST",toast:{...r,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,r]=a.useState(c);return a.useEffect(()=>(l.push(r),()=>{let e=l.indexOf(r);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},88539:(e,r,t)=>{"use strict";t.d(r,{T:()=>i});var a=t(95155),s=t(12115),o=t(59434);let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("textarea",{className:(0,o.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s})});i.displayName="Textarea"}}]);
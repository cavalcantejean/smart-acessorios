(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5957],{10469:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(40157).A)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},18271:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(40157).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},30285:(e,s,a)=>{"use strict";a.d(s,{$:()=>c,r:()=>l});var t=a(95155),r=a(12115),i=a(99708),n=a(74466),o=a(59434);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,s)=>{let{className:a,variant:r,size:n,asChild:c=!1,...d}=e,u=c?i.DX:"button";return(0,t.jsx)(u,{className:(0,o.cn)(l({variant:r,size:n,className:a})),ref:s,...d})});c.displayName="Button"},33608:(e,s,a)=>{Promise.resolve().then(a.bind(a,72421))},35695:(e,s,a)=>{"use strict";var t=a(18999);a.o(t,"usePathname")&&a.d(s,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(s,{useSearchParams:function(){return t.useSearchParams}})},42625:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(40157).A)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]])},50172:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(40157).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},50286:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(40157).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},56104:(e,s,a)=>{"use strict";let t,r,i;a.d(s,{db:()=>r,j:()=>i});var n=a(23915),o=a(35317),l=a(93004);try{console.log("Attempting Firebase initialization..."),0===(0,n.Dk)().length?(t=(0,n.Wp)({apiKey:"AIzaSyCXVzd3bIG1cNsMZ4nPElKkuu_vE9YS-Ys",authDomain:"smart-acessorios.firebaseapp.com",projectId:"smart-acessorios",storageBucket:"smart-acessorios.firebasestorage.app",messagingSenderId:"782394541540",appId:"1:782394541540:web:942c2d58693c497e9573f1",measurementId:"G-ECBEQKZV53"}),console.log("Firebase app initialized successfully in firebase.ts.")):(t=(0,n.Sx)(),console.log("Firebase app already initialized, getting existing app in firebase.ts.")),r=(0,o.aU)(t),i=(0,l.xI)(t),r?console.log("Firestore 'db' instance obtained successfully in firebase.ts."):console.error("!!! Critical Error: Firestore 'db' instance is NULL or UNDEFINED after getFirestore(app) in firebase.ts !!!"),i?console.log("Firebase Auth 'auth' instance obtained successfully in firebase.ts."):console.error("!!! Critical Error: Firebase Auth 'auth' instance is NULL or UNDEFINED after getAuth(app) in firebase.ts !!!")}catch(e){console.error("!!! Firebase/Firestore/Auth Initialization Error in firebase.ts !!!"),e instanceof Error?(console.error("Error Name:",e.name),console.error("Error Message:",e.message),console.error("Error Stack:",e.stack)):console.error("Raw Error Object during Firebase init in firebase.ts:",e)}},59434:(e,s,a)=>{"use strict";a.d(s,{cn:()=>i});var t=a(52596),r=a(39688);function i(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,r.QP)((0,t.$)(s))}},66681:(e,s,a)=>{"use strict";a.d(s,{A:()=>d,AuthProvider:()=>c});var t=a(12115),r=a(56104),i=a(93004),n=a(35317),o=a(35695);let l=(0,t.createContext)(void 0);function c(e){var s;let{children:a}=e,[c,d]=(0,t.useState)(null),[u,h]=(0,t.useState)(null),[m,x]=(0,t.useState)(!0),g=(0,o.useRouter)(),f=(0,t.useCallback)(async e=>{console.log("useAuth: processAuthStateChange TRIGGERED. fbUser UID:",e?e.uid:"null"),x(!0);try{if(e){console.log("useAuth: fbUser detected. Setting firebaseUser state for UID:",e.uid),h(e),console.log("useAuth: Fetching Firestore data for UID:",e.uid);let s=(0,n.H9)(r.db,"usuarios",e.uid),a=await (0,n.x7)(s);if(a.exists()){let s=a.data(),t={id:e.uid,email:e.email,name:s.name||e.displayName||"Usu\xe1rio",isAdmin:s.isAdmin||!1};console.log("useAuth: Firestore data found & AuthUser set for UID: ".concat(e.uid,", Name: ").concat(t.name,", Admin: ").concat(t.isAdmin)),d(t)}else if(console.warn("useAuth: User ".concat(e.uid," authenticated (Firebase Auth) but NO Firestore document.")),e.providerData.some(e=>e.providerId===i.HF.PROVIDER_ID)){console.log("useAuth: User ".concat(e.uid," is a new social login (e.g., Google). Creating Firestore document."));let a={id:e.uid,name:e.displayName||"Usu\xe1rio Social",email:e.email||"email.social@desconhecido.com",isAdmin:!1,avatarUrl:e.photoURL||"https://placehold.co/150x150.png?text=".concat((e.displayName||"S").charAt(0).toUpperCase()),avatarHint:"user avatar social",bio:"Novo membro via login social!"};await (0,n.BN)(s,{...a,createdAt:(0,n.O5)(),updatedAt:(0,n.O5)()}),console.log("useAuth: Firestore document CREATED for new social user: ".concat(e.uid));let t={id:a.id,email:a.email,name:a.name,isAdmin:a.isAdmin};d(t)}else console.warn("useAuth: User ".concat(e.uid," authenticated via non-social method but NO Firestore document. Forcing logout.")),await (0,i.CI)(r.j)}else console.log("useAuth: No Firebase user (logged out or initial state). Clearing authUser and firebaseUser states."),d(null),h(null)}catch(e){if(console.error("useAuth: CRITICAL ERROR inside processAuthStateChange:",e),d(null),h(null),r.j.currentUser){console.log("useAuth: Attempting to sign out Firebase user due to error in processAuthStateChange.");try{await (0,i.CI)(r.j)}catch(e){console.error("useAuth: Error attempting to sign out Firebase user after error in processAuthStateChange:",e)}}}finally{console.log("useAuth: processAuthStateChange - Bloco FINALLY. Definindo isLoading para FALSE."),x(!1)}},[]);(0,t.useEffect)(()=>{console.log("useAuth: Setting up onAuthStateChanged listener.");let e=(0,i.hg)(r.j,e=>{f(e)});return()=>{console.log("useAuth: Cleaning up onAuthStateChanged listener (AuthProvider unmounted)."),e()}},[f]);let p=(0,t.useCallback)(async()=>{console.log("useAuth: logout function called."),x(!0);try{await (0,i.CI)(r.j),console.log("useAuth: signOut successful. Navigating to homepage."),g.push("/")}catch(e){console.error("useAuth: Error during signOut: ",e),x(!1)}},[g]),v=(0,t.useCallback)(async()=>{console.log("useAuth: refreshAuthUser called.");let e=r.j.currentUser;console.log("useAuth: refreshAuthUser - current Firebase user from auth.currentUser:",e?e.uid:"null"),await f(e)},[f]),A=!m&&!!c&&!!u,y=!m&&null!=(s=null==c?void 0:c.isAdmin)&&s;return t.createElement(l.Provider,{value:{user:c,firebaseUser:u,isAuthenticated:A,isAdmin:y,isLoading:m,logout:p,refreshAuthUser:v}},a)}function d(){let e=(0,t.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},66695:(e,s,a)=>{"use strict";a.d(s,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>n,aR:()=>o,wL:()=>u});var t=a(95155),r=a(12115),i=a(59434);let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});n.displayName="Card";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...r})});o.displayName="CardHeader";let l=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});l.displayName="CardTitle";let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})});c.displayName="CardDescription";let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",a),...r})});d.displayName="CardContent";let u=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",a),...r})});u.displayName="CardFooter"},72421:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>b});var t=a(95155),r=a(12115),i=a(35695),n=a(6874),o=a.n(n),l=a(66681),c=a(66695),d=a(30285),u=a(50172),h=a(40157);let m=(0,h.A)("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);var x=a(10469),g=a(42625);let f=(0,h.A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),p=(0,h.A)("TicketPercent",[["path",{d:"M2 9a3 3 0 1 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 1 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"1l48ns"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]]);var v=a(50286);let A=(0,h.A)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var y=a(18271);function b(){let{user:e,isAuthenticated:s,isAdmin:a,isLoading:n}=(0,l.A)(),h=(0,i.useRouter)();return((0,r.useEffect)(()=>{n||s&&a||h.replace("/login?message=Admin%20access%20required"),!n&&s&&a&&e&&(document.title="Admin: ".concat(e.name," | SmartAcessorios"))},[n,s,a,h,e]),n)?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-12rem)]",children:[(0,t.jsx)(u.A,{className:"h-12 w-12 animate-spin text-primary mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Verificando permiss\xf5es..."})]}):s&&a?(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold font-headline flex items-center gap-2",children:[(0,t.jsx)(x.A,{className:"h-8 w-8 text-primary"}),"Painel do Administrador"]}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:["Bem-vindo(a), ",null==e?void 0:e.name,"! Gerencie o SmartAcessorios aqui."]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)(c.Zp,{className:"shadow-lg hover:shadow-xl transition-shadow",children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2 text-xl",children:[(0,t.jsx)(g.A,{className:"h-6 w-6 text-indigo-500"}),"Gerenciar Acess\xf3rios"]}),(0,t.jsx)(c.BT,{children:"Adicione, edite ou remova acess\xf3rios e ofertas."})]}),(0,t.jsx)(c.Wu,{children:(0,t.jsx)(d.$,{asChild:!0,className:"w-full",variant:"outline",children:(0,t.jsx)(o(),{href:"/admin/accessories",children:"Gerenciar Acess\xf3rios"})})})]}),(0,t.jsxs)(c.Zp,{className:"shadow-lg hover:shadow-xl transition-shadow",children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2 text-xl",children:[(0,t.jsx)(f,{className:"h-6 w-6 text-purple-500"}),"Gerenciar Posts do Blog"]}),(0,t.jsx)(c.BT,{children:"Crie e edite artigos para o blog."})]}),(0,t.jsx)(c.Wu,{children:(0,t.jsx)(d.$,{asChild:!0,className:"w-full",variant:"outline",children:(0,t.jsx)(o(),{href:"/admin/blog-posts",children:"Gerenciar Blog"})})})]}),(0,t.jsxs)(c.Zp,{className:"shadow-lg hover:shadow-xl transition-shadow",children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2 text-xl",children:[(0,t.jsx)(p,{className:"h-6 w-6 text-teal-500"}),"Gerenciar Cupons"]}),(0,t.jsx)(c.BT,{children:"Adicione, edite ou remova cupons promocionais."})]}),(0,t.jsx)(c.Wu,{children:(0,t.jsx)(d.$,{asChild:!0,className:"w-full",variant:"outline",children:(0,t.jsx)(o(),{href:"/admin/coupons",children:"Gerenciar Cupons"})})})]}),(0,t.jsxs)(c.Zp,{className:"shadow-lg hover:shadow-xl transition-shadow",children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2 text-xl",children:[(0,t.jsx)(v.A,{className:"h-6 w-6 text-blue-500"}),"Gerenciar Usu\xe1rios"]}),(0,t.jsx)(c.BT,{children:"Visualize e gerencie contas de usu\xe1rios."})]}),(0,t.jsx)(c.Wu,{children:(0,t.jsx)(d.$,{asChild:!0,className:"w-full",variant:"outline",children:(0,t.jsx)(o(),{href:"/admin/users",children:"Acessar Gerenciamento de Usu\xe1rios"})})})]}),(0,t.jsxs)(c.Zp,{className:"shadow-lg hover:shadow-xl transition-shadow",children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2 text-xl",children:[(0,t.jsx)(A,{className:"h-6 w-6 text-green-500"}),"Analytics do Site"]}),(0,t.jsx)(c.BT,{children:"Visualize estat\xedsticas de uso e engajamento."})]}),(0,t.jsx)(c.Wu,{children:(0,t.jsx)(d.$,{asChild:!0,className:"w-full",variant:"outline",children:(0,t.jsx)(o(),{href:"/admin/analytics",children:"Ver Analytics"})})})]}),(0,t.jsxs)(c.Zp,{className:"shadow-lg hover:shadow-xl transition-shadow",children:[(0,t.jsxs)(c.aR,{children:[(0,t.jsxs)(c.ZB,{className:"flex items-center gap-2 text-xl",children:[(0,t.jsx)(y.A,{className:"h-6 w-6 text-pink-500"}),"Configura\xe7\xf5es do Site"]}),(0,t.jsx)(c.BT,{children:"Ajustes gerais e configura\xe7\xf5es da plataforma."})]}),(0,t.jsx)(c.Wu,{children:(0,t.jsx)(d.$,{asChild:!0,className:"w-full",variant:"outline",children:(0,t.jsx)(o(),{href:"/admin/settings",children:"Acessar Configura\xe7\xf5es"})})})]})]})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-12rem)] text-center",children:[(0,t.jsx)(m,{className:"h-16 w-16 text-destructive mb-4"}),(0,t.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Acesso Negado"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-6",children:"Voc\xea n\xe3o tem permiss\xe3o para acessar esta p\xe1gina. Redirecionando..."})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[2992,6073,6874,3796,2964,6257,8441,1684,7358],()=>s(33608)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5410],{12484:(e,a,s)=>{"use strict";s.d(a,{default:()=>w});var t=s(95155),i=s(12115),d=s(30285),n=s(85127),l=s(26126),r=s(6874),c=s.n(r),o=s(98328);let h=(0,s(40157).A)("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);var u=s(18763),x=s(50172),m=s(77223),p=s(87481),v=s(37349),j=s(83343),f=s(73168),y=s(90540),N=s(35317),g=s(66681),b=s(34477);let A=(0,b.createServerReference)("402dd85e0ae472622d788c353177682a7882bd6eef",b.callServer,void 0,b.findSourceMapURL,"deleteCouponAction"),k=e=>{let a;if(!e)return"N/A";try{if(e instanceof Date)a=e;else if(e instanceof N.Dc)a=e.toDate();else if("string"==typeof e)a=/^\d{4}-\d{2}-\d{2}(T\d{2}:\d{2}:\d{2}(\.\d+)?(Z|([+-]\d{2}:\d{2})))?$/.test(e)?(0,j.H)(e):new Date(e);else{if("object"!=typeof e||null===e||"number"!=typeof e.seconds||"number"!=typeof e.nanoseconds)return"Data inv\xe1lida";a=new N.Dc(e.seconds,e.nanoseconds).toDate()}if(isNaN(a.getTime()))return"string"==typeof e?e:"Data inv\xe1lida";return(0,f.GP)(a,"PPP",{locale:y.F})}catch(a){return"string"==typeof e?e:"Data inv\xe1lida"}};function w(e){let{initialCoupons:a}=e,[s,r]=(0,i.useState)(a),{toast:j}=(0,p.dj)(),[f,y]=(0,i.useState)(null),[N,b]=(0,i.useState)(!1),{user:w,isAuthenticated:M}=(0,g.A)(),[C,D]=(0,i.useTransition)();(0,i.useEffect)(()=>{r(a)},[a]);let E=async()=>{if(!M||!(null==w?void 0:w.id)){j({title:"N\xe3o autenticado",description:"Voc\xea precisa estar logado como administrador para excluir.",variant:"destructive"}),y(null);return}if(!f)return void j({title:"Erro Interno",description:"Nenhum cupom selecionado para exclus\xe3o.",variant:"destructive"});b(!0),D(async()=>{let e=await A(f.id);e.success?j({title:"Sucesso!",description:e.message}):j({title:"Erro ao Excluir",description:e.message||"Ocorreu um erro desconhecido.",variant:"destructive"}),b(!1),y(null)})};return(0,t.jsxs)(v.Lt,{open:!!f,onOpenChange:e=>{e||y(null)},children:[(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(n.XI,{children:[(0,t.jsx)(n.A0,{children:(0,t.jsxs)(n.Hj,{children:[(0,t.jsx)(n.nd,{children:"C\xf3digo"}),(0,t.jsx)(n.nd,{className:"hidden sm:table-cell",children:"Desconto"}),(0,t.jsx)(n.nd,{className:"hidden md:table-cell",children:"Descri\xe7\xe3o"}),(0,t.jsx)(n.nd,{className:"hidden lg:table-cell",children:"Validade"}),(0,t.jsx)(n.nd,{className:"hidden lg:table-cell",children:"Loja"}),(0,t.jsx)(n.nd,{className:"text-right",children:"A\xe7\xf5es"})]})}),(0,t.jsx)(n.BF,{children:s.map(e=>(0,t.jsxs)(n.Hj,{children:[(0,t.jsx)(n.nA,{className:"font-mono font-semibold text-primary max-w-[150px] truncate",children:e.code}),(0,t.jsx)(n.nA,{className:"hidden sm:table-cell",children:(0,t.jsx)(l.E,{variant:"secondary",children:e.discount})}),(0,t.jsx)(n.nA,{className:"hidden md:table-cell max-w-[300px] truncate",children:e.description}),(0,t.jsx)(n.nA,{className:"hidden lg:table-cell text-xs",children:e.expiryDate?(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(o.A,{className:"h-3.5 w-3.5 text-muted-foreground"}),k(e.expiryDate)]}):"Sem validade"}),(0,t.jsx)(n.nA,{className:"hidden lg:table-cell text-xs",children:e.store?(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(h,{className:"h-3.5 w-3.5 text-muted-foreground"}),e.store]}):"N/A"}),(0,t.jsxs)(n.nA,{className:"text-right space-x-1 sm:space-x-2",children:[(0,t.jsx)(d.$,{variant:"outline",size:"icon",asChild:!0,title:"Editar Cupom",children:(0,t.jsx)(c(),{href:"/admin/coupons/".concat(e.id,"/edit"),children:(0,t.jsx)(u.A,{className:"h-4 w-4"})})}),(0,t.jsx)(v.tv,{asChild:!0,children:(0,t.jsx)(d.$,{variant:"destructive",size:"icon",onClick:()=>y(e),disabled:N||C,title:"Excluir Cupom",children:N&&(null==f?void 0:f.id)===e.id||C&&(null==f?void 0:f.id)===e.id?(0,t.jsx)(x.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(m.A,{className:"h-4 w-4"})})})]})]},e.id))})]})}),(0,t.jsx)(v.EO,{children:f&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(v.wd,{children:[(0,t.jsx)(v.r7,{children:"Confirmar Exclus\xe3o"}),(0,t.jsxs)(v.$v,{children:['Tem certeza que deseja excluir o cupom "',f.code,'"? Esta a\xe7\xe3o n\xe3o pode ser desfeita.']})]}),(0,t.jsxs)(v.ck,{children:[(0,t.jsx)(v.Zr,{disabled:N,children:"Cancelar"}),(0,t.jsxs)(v.Rx,{onClick:E,disabled:N||C||!M,className:"bg-destructive hover:bg-destructive/90",children:[N||C?(0,t.jsx)(x.A,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Excluir"]})]})]})})]})}},18763:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(40157).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},47690:(e,a,s)=>{Promise.resolve().then(s.t.bind(s,6874,23)),Promise.resolve().then(s.bind(s,12484))},98328:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(40157).A)("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]])}},e=>{var a=a=>e(e.s=a);e.O(0,[2992,6073,6874,3796,2964,6257,5373,5452,7719,6985,8441,1684,7358],()=>a(47690)),_N_E=e.O()}]);
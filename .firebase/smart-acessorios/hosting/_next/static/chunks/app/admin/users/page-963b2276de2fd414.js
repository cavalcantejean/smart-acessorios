(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8733],{8376:(e,i,r)=>{"use strict";r.d(i,{A:()=>s});let s=(0,r(40157).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},24371:(e,i,r)=>{"use strict";r.d(i,{A:()=>s});let s=(0,r(40157).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},34477:(e,i,r)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),!function(e,i){for(var r in i)Object.defineProperty(e,r,{enumerable:!0,get:i[r]})}(i,{callServer:function(){return s.callServer},createServerReference:function(){return n},findSourceMapURL:function(){return t.findSourceMapURL}});let s=r(53806),t=r(31818),n=r(34979).createServerReference},60624:(e,i,r)=>{Promise.resolve().then(r.t.bind(r,6874,23)),Promise.resolve().then(r.bind(r,75151))},75151:(e,i,r)=>{"use strict";r.d(i,{default:()=>g});var s=r(95155),t=r(12115),n=r(30285),a=r(85127),d=r(8376),l=r(24371),c=r(40157);let o=(0,c.A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var m=r(50172);let u=(0,c.A)("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);var h=r(6874),v=r.n(h),x=r(87481),p=r(26126),j=r(66681),f=r(34477);let y=(0,f.createServerReference)("60c68573fddcb578806361c0a5049258e5f36135e2",f.callServer,void 0,f.findSourceMapURL,"toggleAdminStatusAction"),A=(0,f.createServerReference)("60808db70241ac65620226261f44c24635cafa1c24",f.callServer,void 0,f.findSourceMapURL,"deleteUserAction");var N=r(37349),k=r(77223);function g(e){let{initialUsers:i}=e,[r,c]=(0,t.useState)(i),[h,f]=(0,t.useState)(null),[g,b]=(0,t.useState)(null),[w,S]=(0,t.useState)(!1),{toast:E}=(0,x.dj)(),{user:C,isLoading:R,isAuthenticated:z}=(0,j.A)(),[P,U]=(0,t.useTransition)();(0,t.useEffect)(()=>{c(i)},[i]);let M=async e=>{if(!z||!(null==C?void 0:C.id))return void E({title:"N\xe3o autenticado",description:"Voc\xea precisa estar logado como administrador.",variant:"destructive"});let i=r.find(i=>i.id===e);if(!i)return void E({title:"Erro",description:"Usu\xe1rio n\xe3o encontrado.",variant:"destructive"});let s=r.filter(e=>!0===e.isAdmin);if(C.id===e&&i.isAdmin&&1===s.length)return void E({title:"A\xe7\xe3o N\xe3o Permitida",description:"Voc\xea n\xe3o pode remover seu pr\xf3prio status de administrador pois \xe9 o \xfanico administrador no sistema.",variant:"destructive"});f(e),U(async()=>{let i=await y(e,C.id);i.success?E({title:"Sucesso!",description:i.message}):E({title:"Erro ao Alterar Status",description:i.message||"Ocorreu um erro desconhecido.",variant:"destructive"}),f(null)})},O=async()=>{if(!z||!(null==C?void 0:C.id)){E({title:"N\xe3o autenticado",description:"Voc\xea precisa estar logado como administrador.",variant:"destructive"}),b(null);return}if(!g)return void E({title:"Erro Interno",description:"Nenhum usu\xe1rio selecionado para exclus\xe3o.",variant:"destructive"});if(C.id===g.id){E({title:"A\xe7\xe3o N\xe3o Permitida",description:"Administradores n\xe3o podem excluir suas pr\xf3prias contas atrav\xe9s deste painel.",variant:"destructive"}),b(null);return}S(!0),U(async()=>{let e=await A(g.id,C.id);e.success?E({title:"Sucesso!",description:e.message}):E({title:"Erro ao Excluir Usu\xe1rio",description:e.message||"Ocorreu um erro desconhecido.",variant:"destructive"}),S(!1),b(null)})},_=null==C?void 0:C.id;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(a.XI,{children:[(0,s.jsx)(a.A0,{children:(0,s.jsxs)(a.Hj,{children:[(0,s.jsx)(a.nd,{className:"w-[100px] hidden sm:table-cell",children:"ID"}),(0,s.jsx)(a.nd,{children:"Nome"}),(0,s.jsx)(a.nd,{children:"Email"}),(0,s.jsx)(a.nd,{className:"text-center",children:"Admin?"}),(0,s.jsx)(a.nd,{className:"text-right",children:"A\xe7\xf5es"})]})}),(0,s.jsx)(a.BF,{children:r.map(e=>{let i=e.isAdmin&&1===r.filter(e=>e.isAdmin).length&&e.id===_,t=h===e.id,c=P||t||i&&e.id===_||R,x=i&&e.id===_?"N\xe3o \xe9 poss\xedvel remover o status de administrador do \xfanico administrador.":e.isAdmin?"Remover Admin":"Tornar Admin",j=P||t||R||(null==C?void 0:C.id)===e.id,f=(null==C?void 0:C.id)===e.id?"N\xe3o \xe9 poss\xedvel excluir a pr\xf3pria conta":"Excluir Usu\xe1rio";return(0,s.jsxs)(a.Hj,{children:[(0,s.jsx)(a.nA,{className:"font-medium hidden sm:table-cell truncate max-w-[100px]",children:e.id}),(0,s.jsx)(a.nA,{children:e.name}),(0,s.jsx)(a.nA,{children:e.email}),(0,s.jsx)(a.nA,{className:"text-center",children:e.isAdmin?(0,s.jsxs)(p.E,{variant:"default",className:"bg-green-500 hover:bg-green-600",children:[(0,s.jsx)(d.A,{className:"mr-1 h-4 w-4"})," Sim"]}):(0,s.jsxs)(p.E,{variant:"secondary",children:[(0,s.jsx)(l.A,{className:"mr-1 h-4 w-4"})," N\xe3o"]})}),(0,s.jsxs)(a.nA,{className:"text-right space-x-2",children:[(0,s.jsx)(n.$,{variant:"outline",size:"sm",asChild:!0,children:(0,s.jsxs)(v(),{href:"/profile/".concat(e.id),title:"Ver Perfil",children:[(0,s.jsx)(o,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only sm:not-sr-only sm:ml-1",children:"Perfil"})]})}),(0,s.jsxs)(n.$,{variant:(e.isAdmin,"outline"),size:"sm",onClick:()=>M(e.id),disabled:c,title:x,className:e.isAdmin?"border-yellow-500 hover:border-yellow-600 text-yellow-600 hover:text-yellow-700":"",children:[t&&P?(0,s.jsx)(m.A,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(u,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only sm:not-sr-only sm:ml-1",children:e.isAdmin?"Remover Admin":"Tornar Admin"})]}),(0,s.jsxs)(n.$,{variant:"destructive",size:"sm",onClick:()=>b(e),disabled:j,title:f,children:[(0,s.jsx)(k.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only sm:not-sr-only sm:ml-1",children:"Excluir"})]})]})]},e.id)})})]})}),(0,s.jsx)(N.Lt,{open:!!g,onOpenChange:e=>{e||b(null)},children:(0,s.jsx)(N.EO,{children:g&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(N.wd,{children:[(0,s.jsx)(N.r7,{children:"Confirmar Exclus\xe3o"}),(0,s.jsxs)(N.$v,{children:['Tem certeza que deseja excluir permanentemente o usu\xe1rio "',g.name,'" (',g.email,")? Esta a\xe7\xe3o remover\xe1 o usu\xe1rio da autentica\xe7\xe3o e todos os seus dados associados no banco de dados. Esta a\xe7\xe3o n\xe3o pode ser desfeita."]})]}),(0,s.jsxs)(N.ck,{children:[(0,s.jsx)(N.Zr,{disabled:w||P,children:"Cancelar"}),(0,s.jsxs)(N.Rx,{onClick:O,disabled:w||P||(null==C?void 0:C.id)===(null==g?void 0:g.id),className:"bg-destructive hover:bg-destructive/90",children:[w||P?(0,s.jsx)(m.A,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Excluir Permanentemente"]})]})]})})})]})}}},e=>{var i=i=>e(e.s=i);e.O(0,[2992,6073,6874,3796,9502,6257,1263,5452,6985,8441,1684,7358],()=>i(60624)),_N_E=e.O()}]);
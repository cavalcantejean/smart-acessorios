(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4040],{13768:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]])},19637:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},19677:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("Ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]])},25107:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]])},25868:(e,t,a)=>{"use strict";a.d(t,{r:()=>o});var s=a(12115);let r="smartAccessoryFavorites";function i(){let e=localStorage.getItem(r);try{return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing favorites from localStorage",e),[]}}function o(){let[e,t]=(0,s.useState)([]);(0,s.useEffect)(()=>{t(i())},[]);let a=(0,s.useCallback)(e=>{t(t=>{let a=t.includes(e)?t.filter(t=>t!==e):[...t,e];return localStorage.setItem(r,JSON.stringify(a)),window.dispatchEvent(new CustomEvent("favoritesUpdated",{detail:a})),a})},[]);(0,s.useEffect)(()=>{let e=()=>{t(i())},a=e=>{if(e.detail){let a=e.detail;setTimeout(()=>{t(a)},0)}};return window.addEventListener("storage",e),window.addEventListener("favoritesUpdated",a),()=>{window.removeEventListener("storage",e),window.removeEventListener("favoritesUpdated",a)}},[]);let o=(0,s.useCallback)(t=>e.includes(t),[e]);return{favoriteIds:e,toggleFavorite:a,isFavorite:o}}},27820:(e,t,a)=>{"use strict";a.d(t,{default:()=>h});var s=a(95155),r=a(66766),i=a(6874),o=a.n(i),l=a(66695),c=a(30285),n=a(91420),d=a(25868),u=a(66681);function h(e){let{accessory:t,priority:a=!1}=e,{isFavorite:i,toggleFavorite:h}=(0,d.r)(),{isAuthenticated:m,isLoading:f}=(0,u.A)(),p=i(t.id);return(0,s.jsxs)(l.Zp,{className:"flex flex-col overflow-hidden rounded-lg shadow-lg transition-all hover:shadow-xl h-full",children:[(0,s.jsx)(o(),{href:"/accessory/".concat(t.id),className:"block",children:(0,s.jsx)(l.aR,{className:"p-0",children:(0,s.jsx)("div",{className:"aspect-video relative w-full",children:(0,s.jsx)(r.default,{src:t.imageUrl,alt:t.name,fill:!0,style:{objectFit:"cover"},sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",className:"rounded-t-lg","data-ai-hint":t.imageHint||"accessory product",priority:a})})})}),(0,s.jsxs)(l.Wu,{className:"p-4 flex-grow",children:[(0,s.jsx)(o(),{href:"/accessory/".concat(t.id),className:"block",children:(0,s.jsx)(l.ZB,{className:"text-lg font-headline mb-1 hover:text-primary transition-colors",children:t.name})}),(0,s.jsx)(l.BT,{className:"text-sm text-muted-foreground mb-2 line-clamp-2",children:t.shortDescription}),t.price&&(0,s.jsxs)("p",{className:"text-base font-semibold text-primary",children:["R$",t.price.replace(".",",")]})]}),(0,s.jsxs)(l.wL,{className:"p-4 flex justify-between items-center border-t",children:[(0,s.jsx)(c.$,{asChild:!0,variant:"outline",size:"sm",children:(0,s.jsx)(o(),{href:"/accessory/".concat(t.id),children:"Ver Detalhes"})}),!f&&m&&(0,s.jsx)(n.A,{isFavorite:p,onClick:()=>h(t.id)})]})]})}},31526:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("SquarePlay",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 8 6 4-6 4Z",key:"f1r3lt"}]])},34282:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]])},35695:(e,t,a)=>{"use strict";var s=a(18999);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},38224:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},44965:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]])},50172:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},57451:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]])},66681:(e,t,a)=>{"use strict";a.d(t,{A:()=>d,AuthProvider:()=>n});var s=a(12115),r=a(56104),i=a(93004),o=a(35317),l=a(35695);let c=(0,s.createContext)(void 0);function n(e){var t;let{children:a}=e,[n,d]=(0,s.useState)(null),[u,h]=(0,s.useState)(null),[m,f]=(0,s.useState)(!0),p=(0,l.useRouter)(),g=(0,s.useCallback)(async e=>{console.log("useAuth: processAuthStateChange TRIGGERED. fbUser UID:",e?e.uid:"null"),f(!0);try{if(e){console.log("useAuth: fbUser detected. Setting firebaseUser state for UID:",e.uid),h(e),console.log("useAuth: Fetching Firestore data for UID:",e.uid);let t=(0,o.H9)(r.db,"usuarios",e.uid),a=await (0,o.x7)(t);if(a.exists()){let t=a.data(),s={id:e.uid,email:e.email,name:t.name||e.displayName||"Usu\xe1rio",isAdmin:t.isAdmin||!1};console.log("useAuth: Firestore data found & AuthUser set for UID: ".concat(e.uid,", Name: ").concat(s.name,", Admin: ").concat(s.isAdmin)),d(s)}else if(console.warn("useAuth: User ".concat(e.uid," authenticated (Firebase Auth) but NO Firestore document.")),e.providerData.some(e=>e.providerId===i.HF.PROVIDER_ID)){console.log("useAuth: User ".concat(e.uid," is a new social login (e.g., Google). Creating Firestore document."));let a={id:e.uid,name:e.displayName||"Usu\xe1rio Social",email:e.email||"email.social@desconhecido.com",isAdmin:!1,avatarUrl:e.photoURL||"https://placehold.co/150x150.png?text=".concat((e.displayName||"S").charAt(0).toUpperCase()),avatarHint:"user avatar social",bio:"Novo membro via login social!"};await (0,o.BN)(t,{...a,createdAt:(0,o.O5)(),updatedAt:(0,o.O5)()}),console.log("useAuth: Firestore document CREATED for new social user: ".concat(e.uid));let s={id:a.id,email:a.email,name:a.name,isAdmin:a.isAdmin};d(s)}else console.warn("useAuth: User ".concat(e.uid," authenticated via non-social method but NO Firestore document. Forcing logout.")),await (0,i.CI)(r.j)}else console.log("useAuth: No Firebase user (logged out or initial state). Clearing authUser and firebaseUser states."),d(null),h(null)}catch(e){if(console.error("useAuth: CRITICAL ERROR inside processAuthStateChange:",e),d(null),h(null),r.j.currentUser){console.log("useAuth: Attempting to sign out Firebase user due to error in processAuthStateChange.");try{await (0,i.CI)(r.j)}catch(e){console.error("useAuth: Error attempting to sign out Firebase user after error in processAuthStateChange:",e)}}}finally{console.log("useAuth: processAuthStateChange - Bloco FINALLY. Definindo isLoading para FALSE."),f(!1)}},[]);(0,s.useEffect)(()=>{console.log("useAuth: Setting up onAuthStateChanged listener.");let e=(0,i.hg)(r.j,e=>{g(e)});return()=>{console.log("useAuth: Cleaning up onAuthStateChanged listener (AuthProvider unmounted)."),e()}},[g]);let A=(0,s.useCallback)(async()=>{console.log("useAuth: logout function called."),f(!0);try{await (0,i.CI)(r.j),console.log("useAuth: signOut successful. Navigating to homepage."),p.push("/")}catch(e){console.error("useAuth: Error during signOut: ",e),f(!1)}},[p]),x=(0,s.useCallback)(async()=>{console.log("useAuth: refreshAuthUser called.");let e=r.j.currentUser;console.log("useAuth: refreshAuthUser - current Firebase user from auth.currentUser:",e?e.uid:"null"),await g(e)},[g]),v=!m&&!!n&&!!u,y=!m&&null!=(t=null==n?void 0:n.isAdmin)&&t;return s.createElement(c.Provider,{value:{user:n,firebaseUser:u,isAuthenticated:v,isAdmin:y,isLoading:m,logout:A,refreshAuthUser:x}},a)}function d(){let e=(0,s.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},66695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>n,Wu:()=>d,ZB:()=>c,Zp:()=>o,aR:()=>l,wL:()=>u});var s=a(95155),r=a(12115),i=a(59434);let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});o.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...r})});l.displayName="CardHeader";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});c.displayName="CardTitle";let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})});n.displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...r})});d.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...r})});u.displayName="CardFooter"},68098:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},73672:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},80929:(e,t,a)=>{Promise.resolve().then(a.bind(a,85778))},85778:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var s=a(95155),r=a(12115),i=a(93473),o=a(27820),l=a(25868),c=a(50172),n=a(68098),d=a(66681),u=a(35695),h=a(30285),m=a(35317);let f=e=>({...e,createdAt:e.createdAt instanceof m.Dc?e.createdAt.toDate().toISOString():e.createdAt,updatedAt:e.updatedAt instanceof m.Dc?e.updatedAt.toDate().toISOString():e.updatedAt,comments:(e.comments||[]).map(e=>({...e,createdAt:e.createdAt instanceof m.Dc?e.createdAt.toDate().toISOString():e.createdAt}))});function p(){let{favoriteIds:e}=(0,l.r)(),[t,a]=(0,r.useState)([]),{isAuthenticated:m,isLoading:p}=(0,d.A)(),g=(0,u.useRouter)(),[A,x]=(0,r.useState)(!0);(0,r.useEffect)(()=>{p||m||g.replace("/login")},[m,p,g]),(0,r.useEffect)(()=>{(async()=>{if(m&&!p){x(!0);try{let e=await (0,i.yg)();a(e.map(f))}catch(e){console.error("Error fetching accessories for favorites page:",e),a([])}finally{x(!1)}}else p||(x(!1),a([]))})()},[m,p]);let v=Array.isArray(t)?t.filter(t=>e.includes(t.id)):[];return p||A?(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center min-h-[calc(100vh-12rem)]",children:[(0,s.jsx)(c.A,{className:"h-12 w-12 animate-spin text-primary mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Carregando seus favoritos..."})]}):m?(0,s.jsx)("div",{className:"space-y-8",children:(0,s.jsxs)("section",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-6",children:[(0,s.jsx)(n.A,{className:"h-8 w-8 text-destructive"}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-center font-headline",children:"Seus Favoritos"})]}),v.length>0?(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:v.map(e=>(0,s.jsx)(o.default,{accessory:e},e.id))}):(0,s.jsx)("p",{className:"text-center text-muted-foreground py-10",children:"Voc\xea ainda n\xe3o favoritou nenhum acess\xf3rio. Navegue pelos acess\xf3rios e clique no \xedcone de cora\xe7\xe3o para salv\xe1-los aqui!"})]})}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-12rem)] text-center",children:[(0,s.jsx)(n.A,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,s.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Acesso Negado"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-6",children:"Voc\xea precisa estar logado para ver seus acess\xf3rios favoritos."}),(0,s.jsx)(h.$,{onClick:()=>g.push("/login"),children:"Ir para a P\xe1gina de Login"})]})}},91420:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(95155),r=a(68098),i=a(30285),o=a(59434);function l(e){let{isFavorite:t,onClick:a,className:l}=e;return(0,s.jsx)(i.$,{variant:"ghost",size:"icon",onClick:e=>{e.preventDefault(),a()},className:(0,o.cn)("rounded-full hover:bg-destructive/10",l),"aria-label":t?"Remover dos favoritos":"Adicionar aos favoritos",children:(0,s.jsx)(r.A,{className:(0,o.cn)("h-5 w-5",t?"fill-destructive text-destructive":"text-muted-foreground")})})}},93498:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]])},94063:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,6073,6874,3796,2964,6257,6766,2421,8441,1684,7358],()=>t(80929)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4040],{25868:(e,t,s)=>{"use strict";s.d(t,{r:()=>c});var r=s(12115);let a="smartAccessoryFavorites";function l(){let e=localStorage.getItem(a);try{return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing favorites from localStorage",e),[]}}function c(){let[e,t]=(0,r.useState)([]);(0,r.useEffect)(()=>{t(l())},[]);let s=(0,r.useCallback)(e=>{t(t=>{let s=t.includes(e)?t.filter(t=>t!==e):[...t,e];return localStorage.setItem(a,JSON.stringify(s)),window.dispatchEvent(new CustomEvent("favoritesUpdated",{detail:s})),s})},[]);(0,r.useEffect)(()=>{let e=()=>{t(l())},s=e=>{if(e.detail){let s=e.detail;setTimeout(()=>{t(s)},0)}};return window.addEventListener("storage",e),window.addEventListener("favoritesUpdated",s),()=>{window.removeEventListener("storage",e),window.removeEventListener("favoritesUpdated",s)}},[]);let c=(0,r.useCallback)(t=>e.includes(t),[e]);return{favoriteIds:e,toggleFavorite:s,isFavorite:c}}},27820:(e,t,s)=>{"use strict";s.d(t,{default:()=>m});var r=s(95155),a=s(66766),l=s(6874),c=s.n(l),i=s(66695),o=s(30285),d=s(91420),n=s(25868),f=s(66681);function m(e){let{accessory:t,priority:s=!1}=e,{isFavorite:l,toggleFavorite:m}=(0,n.r)(),{isAuthenticated:u,isLoading:x}=(0,f.A)(),h=l(t.id);return(0,r.jsxs)(i.Zp,{className:"flex flex-col overflow-hidden rounded-lg shadow-lg transition-all hover:shadow-xl h-full",children:[(0,r.jsx)(c(),{href:"/accessory/".concat(t.id),className:"block",children:(0,r.jsx)(i.aR,{className:"p-0",children:(0,r.jsx)("div",{className:"aspect-video relative w-full",children:(0,r.jsx)(a.default,{src:t.imageUrl,alt:t.name,fill:!0,style:{objectFit:"cover"},sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",className:"rounded-t-lg","data-ai-hint":t.imageHint||"accessory product",priority:s})})})}),(0,r.jsxs)(i.Wu,{className:"p-4 flex-grow",children:[(0,r.jsx)(c(),{href:"/accessory/".concat(t.id),className:"block",children:(0,r.jsx)(i.ZB,{className:"text-lg font-headline mb-1 hover:text-primary transition-colors",children:t.name})}),(0,r.jsx)(i.BT,{className:"text-sm text-muted-foreground mb-2 line-clamp-2",children:t.shortDescription}),t.price&&(0,r.jsxs)("p",{className:"text-base font-semibold text-primary",children:["R$",t.price.replace(".",",")]})]}),(0,r.jsxs)(i.wL,{className:"p-4 flex justify-between items-center border-t",children:[(0,r.jsx)(o.$,{asChild:!0,variant:"outline",size:"sm",children:(0,r.jsx)(c(),{href:"/accessory/".concat(t.id),children:"Ver Detalhes"})}),!x&&u&&(0,r.jsx)(d.A,{isFavorite:h,onClick:()=>m(t.id)})]})]})}},50172:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(40157).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},66695:(e,t,s)=>{"use strict";s.d(t,{BT:()=>d,Wu:()=>n,ZB:()=>o,Zp:()=>c,aR:()=>i,wL:()=>f});var r=s(95155),a=s(12115),l=s(59434);let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});c.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...a})});i.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});o.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...a})});d.displayName="CardDescription";let n=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",s),...a})});n.displayName="CardContent";let f=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",s),...a})});f.displayName="CardFooter"},68098:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(40157).A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},80929:(e,t,s)=>{Promise.resolve().then(s.bind(s,85778))},85778:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(95155),a=s(12115),l=s(93473),c=s(27820),i=s(25868),o=s(50172),d=s(68098),n=s(66681),f=s(35695),m=s(30285),u=s(35317);let x=e=>({...e,createdAt:e.createdAt instanceof u.Dc?e.createdAt.toDate().toISOString():e.createdAt,updatedAt:e.updatedAt instanceof u.Dc?e.updatedAt.toDate().toISOString():e.updatedAt,comments:(e.comments||[]).map(e=>({...e,createdAt:e.createdAt instanceof u.Dc?e.createdAt.toDate().toISOString():e.createdAt}))});function h(){let{favoriteIds:e}=(0,i.r)(),[t,s]=(0,a.useState)([]),{isAuthenticated:u,isLoading:h}=(0,n.A)(),p=(0,f.useRouter)(),[v,g]=(0,a.useState)(!0);(0,a.useEffect)(()=>{h||u||p.replace("/login")},[u,h,p]),(0,a.useEffect)(()=>{(async()=>{if(u&&!h){g(!0);try{let e=await (0,l.yg)();s(e.map(x))}catch(e){console.error("Error fetching accessories for favorites page:",e),s([])}finally{g(!1)}}else h||(g(!1),s([]))})()},[u,h]);let N=Array.isArray(t)?t.filter(t=>e.includes(t.id)):[];return h||v?(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center min-h-[calc(100vh-12rem)]",children:[(0,r.jsx)(o.A,{className:"h-12 w-12 animate-spin text-primary mb-4"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Carregando seus favoritos..."})]}):u?(0,r.jsx)("div",{className:"space-y-8",children:(0,r.jsxs)("section",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-6",children:[(0,r.jsx)(d.A,{className:"h-8 w-8 text-destructive"}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-center font-headline",children:"Seus Favoritos"})]}),N.length>0?(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:N.map(e=>(0,r.jsx)(c.default,{accessory:e},e.id))}):(0,r.jsx)("p",{className:"text-center text-muted-foreground py-10",children:"Voc\xea ainda n\xe3o favoritou nenhum acess\xf3rio. Navegue pelos acess\xf3rios e clique no \xedcone de cora\xe7\xe3o para salv\xe1-los aqui!"})]})}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-12rem)] text-center",children:[(0,r.jsx)(d.A,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,r.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Acesso Negado"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-6",children:"Voc\xea precisa estar logado para ver seus acess\xf3rios favoritos."}),(0,r.jsx)(m.$,{onClick:()=>p.push("/login"),children:"Ir para a P\xe1gina de Login"})]})}},91420:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(95155),a=s(68098),l=s(30285),c=s(59434);function i(e){let{isFavorite:t,onClick:s,className:i}=e;return(0,r.jsx)(l.$,{variant:"ghost",size:"icon",onClick:e=>{e.preventDefault(),s()},className:(0,c.cn)("rounded-full hover:bg-destructive/10",i),"aria-label":t?"Remover dos favoritos":"Adicionar aos favoritos",children:(0,r.jsx)(a.A,{className:(0,c.cn)("h-5 w-5",t?"fill-destructive text-destructive":"text-muted-foreground")})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,6073,6874,3796,9502,6257,6766,3717,8441,1684,7358],()=>t(80929)),_N_E=e.O()}]);
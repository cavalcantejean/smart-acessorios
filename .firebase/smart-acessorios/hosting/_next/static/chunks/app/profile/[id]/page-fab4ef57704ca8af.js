(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2870],{12543:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(40157).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},28294:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(40157).A)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]])},30285:(e,t,r)=>{"use strict";r.d(t,{$:()=>u,r:()=>l});var a=r(95155),s=r(12115),o=r(99708),n=r(74466),i=r(59434);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=s.forwardRef((e,t)=>{let{className:r,variant:s,size:n,asChild:u=!1,...d}=e,c=u?o.DX:"button";return(0,a.jsx)(c,{className:(0,i.cn)(l({variant:s,size:n,className:r})),ref:t,...d})});u.displayName="Button"},59434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>o});var a=r(52596),s=r(39688);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},66080:(e,t,r)=>{"use strict";let a,s,o;r.d(t,{db:()=>o,j:()=>s});var n=r(23915),i=r(93004),l=r(35317),u=r(49509);let d={apiKey:u.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:u.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:"smart-acessorios",storageBucket:u.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:u.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:u.env.NEXT_PUBLIC_FIREBASE_APP_ID};0===(0,n.Dk)().length?(a=(0,n.Wp)(d),console.log("Firebase client app initialized.")):(a=(0,n.Sx)(),console.log("Firebase client app already initialized, getting existing app.")),s=(0,i.xI)(a),o=(0,l.aU)(a)},66681:(e,t,r)=>{"use strict";r.d(t,{A:()=>d,AuthProvider:()=>u});var a=r(12115),s=r(66080),o=r(93004),n=r(35317),i=r(35695);let l=(0,a.createContext)(void 0);function u(e){var t;let{children:r}=e,[u,d]=(0,a.useState)(null),[c,h]=(0,a.useState)(null),[m,g]=(0,a.useState)(!0),f=(0,i.useRouter)(),p=(0,a.useCallback)(async e=>{console.log("useAuth: processAuthStateChange TRIGGERED. fbUser UID:",e?e.uid:"null"),g(!0);try{if(e){console.log("useAuth: fbUser detected. Setting firebaseUser state for UID:",e.uid),h(e),console.log("useAuth: Fetching Firestore data for UID:",e.uid);let t=(0,n.H9)(s.db,"usuarios",e.uid),r=await (0,n.x7)(t);if(r.exists()){let t=r.data(),a={id:e.uid,email:e.email,name:t.name||e.displayName||"Usu\xe1rio",isAdmin:t.isAdmin||!1};console.log("useAuth: Firestore data found & AuthUser set for UID: ".concat(e.uid,", Name: ").concat(a.name,", Admin: ").concat(a.isAdmin)),d(a)}else if(console.warn("useAuth: User ".concat(e.uid," authenticated (Firebase Auth) but NO Firestore document.")),e.providerData.some(e=>e.providerId===o.HF.PROVIDER_ID)){console.log("useAuth: User ".concat(e.uid," is a new social login (e.g., Google). Creating Firestore document."));let r={id:e.uid,name:e.displayName||"Usu\xe1rio Social",email:e.email||"email.social@desconhecido.com",isAdmin:!1,avatarUrl:e.photoURL||"https://placehold.co/150x150.png?text=".concat((e.displayName||"S").charAt(0).toUpperCase()),avatarHint:"user avatar social",bio:"Novo membro via login social!"};await (0,n.BN)(t,{...r,createdAt:(0,n.O5)(),updatedAt:(0,n.O5)()}),console.log("useAuth: Firestore document CREATED for new social user: ".concat(e.uid));let a={id:r.id,email:r.email,name:r.name,isAdmin:r.isAdmin};d(a)}else console.warn("useAuth: User ".concat(e.uid," authenticated via non-social method but NO Firestore document. Forcing logout.")),await (0,o.CI)(s.j)}else console.log("useAuth: No Firebase user (logged out or initial state). Clearing authUser and firebaseUser states."),d(null),h(null)}catch(e){if(console.error("useAuth: CRITICAL ERROR inside processAuthStateChange:",e),d(null),h(null),s.j.currentUser){console.log("useAuth: Attempting to sign out Firebase user due to error in processAuthStateChange.");try{await (0,o.CI)(s.j)}catch(e){console.error("useAuth: Error attempting to sign out Firebase user after error in processAuthStateChange:",e)}}}finally{console.log("useAuth: processAuthStateChange - Bloco FINALLY. Definindo isLoading para FALSE."),g(!1)}},[]);(0,a.useEffect)(()=>{console.log("useAuth: Setting up onAuthStateChanged listener.");let e=(0,o.hg)(s.j,e=>{p(e)});return()=>{console.log("useAuth: Cleaning up onAuthStateChanged listener (AuthProvider unmounted)."),e()}},[p]);let v=(0,a.useCallback)(async()=>{console.log("useAuth: logout function called."),g(!0);try{await (0,o.CI)(s.j),console.log("useAuth: signOut successful. Navigating to homepage."),f.push("/")}catch(e){console.error("useAuth: Error during signOut: ",e),g(!1)}},[f]),x=(0,a.useCallback)(async()=>{console.log("useAuth: refreshAuthUser called.");let e=s.j.currentUser;console.log("useAuth: refreshAuthUser - current Firebase user from auth.currentUser:",e?e.uid:"null"),await p(e)},[p]),A=!m&&!!u&&!!c,b=!m&&null!=(t=null==u?void 0:u.isAdmin)&&t;return a.createElement(l.Provider,{value:{user:u,firebaseUser:c,isAuthenticated:A,isAdmin:b,isLoading:m,logout:v,refreshAuthUser:x}},r)}function d(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},66695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>u,Wu:()=>d,ZB:()=>l,Zp:()=>n,aR:()=>i,wL:()=>c});var a=r(95155),s=r(12115),o=r(59434);let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});n.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});l.displayName="CardTitle";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",r),...s})});u.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",r),...s})});c.displayName="CardFooter"},75246:(e,t,r)=>{"use strict";r.d(t,{default:()=>g});var a=r(95155),s=r(12115),o=r(66766),n=r(6874),i=r.n(n),l=r(66695),u=r(30285),d=r(28294),c=r(12543),h=r(66681);function m(e){let{children:t}=e,r=t((0,h.A)());return(0,a.jsx)(a.Fragment,{children:r})}function g(e){let{profileUser:t}=e,[r,n]=(0,s.useState)(t);return(0,s.useEffect)(()=>{n(t)},[t]),(0,a.jsx)(m,{children:e=>{let{user:t,isAuthenticated:s}=e;return(0,a.jsx)("div",{className:"max-w-3xl mx-auto py-8 px-4",children:(0,a.jsxs)(l.Zp,{className:"overflow-hidden shadow-xl",children:[(0,a.jsxs)(l.aR,{className:"p-6 bg-muted/30 border-b text-center",children:[(0,a.jsx)("div",{className:"relative w-32 h-32 mx-auto rounded-full overflow-hidden border-4 border-background shadow-lg mb-4",children:r.avatarUrl?(0,a.jsx)(o.default,{src:r.avatarUrl,alt:r.name,fill:!0,style:{objectFit:"cover"},sizes:"128px",priority:!0,"data-ai-hint":r.avatarHint||"user avatar"}):(0,a.jsx)("div",{className:"w-full h-full bg-secondary flex items-center justify-center",children:(0,a.jsx)(d.A,{className:"h-20 w-20 text-muted-foreground"})})}),(0,a.jsx)(l.ZB,{className:"text-3xl font-headline",children:r.name}),r.isAdmin&&(0,a.jsx)("p",{className:"text-sm text-primary font-semibold",children:"Administrador"}),r.bio&&(0,a.jsx)(l.BT,{className:"mt-2 text-foreground/80 max-w-md mx-auto",children:r.bio})]}),(0,a.jsx)(l.Wu,{className:"p-6 space-y-6"}),(0,a.jsx)(l.wL,{className:"p-4 bg-secondary/20 border-t",children:(0,a.jsx)(u.$,{variant:"outline",size:"sm",asChild:!0,className:"mx-auto",children:(0,a.jsxs)(i(),{href:"/",children:[(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4"})," Voltar para a P\xe1gina Inicial"]})})})]})})}})}},83005:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6874,23)),Promise.resolve().then(r.bind(r,75246))}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,6073,6874,3796,9502,6257,6766,8441,1684,7358],()=>t(83005)),_N_E=e.O()}]);
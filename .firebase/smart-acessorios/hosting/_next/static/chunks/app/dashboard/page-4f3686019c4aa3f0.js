(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5105],{13768:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(40157).A)("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]])},17390:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var a=s(95155),r=s(66681),l=s(35695),i=s(12115),n=s(66695),o=s(30285),c=s(6874),d=s.n(c),u=s(50172),h=s(33349);let m=(0,s(40157).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var f=s(61840),p=s(68098),A=s(18271),x=s(93473),g=s(35317);function y(){let{user:e,isAuthenticated:t,isLoading:s,logout:c}=(0,r.A)(),y=(0,l.useRouter)(),[v,j]=(0,i.useState)(null),[k,N]=(0,i.useState)(!0);return((0,i.useEffect)(()=>{s||t||y.replace("/login")},[s,t,y]),(0,i.useEffect)(()=>{(async()=>{if(e&&t){N(!0);try{let t=await (0,x.kl)(e.id);if(t){let e={...t,createdAt:t.createdAt instanceof g.Dc?t.createdAt.toDate().toISOString():t.createdAt,updatedAt:t.updatedAt instanceof g.Dc?t.updatedAt.toDate().toISOString():t.updatedAt};j(e),document.title="".concat(e.name," - Painel | SmartAcessorios")}}catch(e){console.error("Error fetching full user data:",e)}finally{N(!1)}}else s||t||N(!1)})()},[e,t,s]),s||k)?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-12rem)]",children:[(0,a.jsx)(u.A,{className:"h-12 w-12 animate-spin text-primary mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Carregando dados do usu\xe1rio..."})]}):t&&e&&v?(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold font-headline",children:["Painel de ",v.name]}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Bem-vindo(a) de volta! Gerencie sua conta aqui."})]}),(0,a.jsxs)(o.$,{variant:"outline",onClick:()=>{c(),y.push("/")},size:"sm",children:[(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4"})," Sair"]})]}),(0,a.jsxs)(n.Zp,{className:"shadow-lg",children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(m,{className:"h-6 w-6 text-primary"}),"Informa\xe7\xf5es da Conta"]}),(0,a.jsx)(n.BT,{children:"Seus dados cadastrais."})]}),(0,a.jsxs)(n.Wu,{className:"space-y-4",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Nome:"})," ",v.name]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Email:"})," ",v.email]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Tipo de Conta:"})," ",v.isAdmin?"Administrador":"Usu\xe1rio Comum"]})]})}),(0,a.jsx)(o.$,{asChild:!0,variant:"link",className:"p-0 h-auto",children:(0,a.jsxs)(d(),{href:"/profile/".concat(v.id),children:["Ver meu perfil p\xfablico ",(0,a.jsx)(f.A,{className:"ml-1 h-3 w-3"})]})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)(n.Zp,{className:"shadow-md hover:shadow-lg transition-shadow",children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(p.A,{className:"h-5 w-5 text-destructive"}),"Meus Favoritos"]}),(0,a.jsx)(n.BT,{children:"Acesse seus acess\xf3rios salvos."})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)(o.$,{asChild:!0,className:"w-full",children:(0,a.jsx)(d(),{href:"/favorites",children:"Ver Favoritos"})})})]}),(0,a.jsxs)(n.Zp,{className:"shadow-md hover:shadow-lg transition-shadow",children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(A.A,{className:"h-5 w-5 text-muted-foreground"}),"Configura\xe7\xf5es"]}),(0,a.jsx)(n.BT,{children:"Gerencie suas prefer\xeancias e dados."})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)(o.$,{asChild:!0,className:"w-full",children:(0,a.jsx)(d(),{href:"/dashboard/settings",children:"Acessar Configura\xe7\xf5es"})})})]})]})]}):(0,a.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-12rem)]",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"Usu\xe1rio n\xe3o encontrado. Redirecionando para login..."})})}},18271:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(40157).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},19637:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(40157).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},19677:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(40157).A)("Ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]])},25107:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(40157).A)("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]])},31526:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(40157).A)("SquarePlay",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 8 6 4-6 4Z",key:"f1r3lt"}]])},33349:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(40157).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},34282:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(40157).A)("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]])},35695:(e,t,s)=>{"use strict";var a=s(18999);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},38224:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(40157).A)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},44965:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(40157).A)("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]])},50172:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(40157).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},55574:(e,t,s)=>{Promise.resolve().then(s.bind(s,17390))},57451:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(40157).A)("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]])},61840:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(40157).A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},66681:(e,t,s)=>{"use strict";s.d(t,{A:()=>d,AuthProvider:()=>c});var a=s(12115),r=s(56104),l=s(93004),i=s(35317),n=s(35695);let o=(0,a.createContext)(void 0);function c(e){var t;let{children:s}=e,[c,d]=(0,a.useState)(null),[u,h]=(0,a.useState)(null),[m,f]=(0,a.useState)(!0),p=(0,n.useRouter)(),A=(0,a.useCallback)(async e=>{console.log("useAuth: processAuthStateChange TRIGGERED. fbUser UID:",e?e.uid:"null"),f(!0);try{if(e){console.log("useAuth: fbUser detected. Setting firebaseUser state for UID:",e.uid),h(e),console.log("useAuth: Fetching Firestore data for UID:",e.uid);let t=(0,i.H9)(r.db,"usuarios",e.uid),s=await (0,i.x7)(t);if(s.exists()){let t=s.data(),a={id:e.uid,email:e.email,name:t.name||e.displayName||"Usu\xe1rio",isAdmin:t.isAdmin||!1};console.log("useAuth: Firestore data found & AuthUser set for UID: ".concat(e.uid,", Name: ").concat(a.name,", Admin: ").concat(a.isAdmin)),d(a)}else if(console.warn("useAuth: User ".concat(e.uid," authenticated (Firebase Auth) but NO Firestore document.")),e.providerData.some(e=>e.providerId===l.HF.PROVIDER_ID)){console.log("useAuth: User ".concat(e.uid," is a new social login (e.g., Google). Creating Firestore document."));let s={id:e.uid,name:e.displayName||"Usu\xe1rio Social",email:e.email||"email.social@desconhecido.com",isAdmin:!1,avatarUrl:e.photoURL||"https://placehold.co/150x150.png?text=".concat((e.displayName||"S").charAt(0).toUpperCase()),avatarHint:"user avatar social",bio:"Novo membro via login social!"};await (0,i.BN)(t,{...s,createdAt:(0,i.O5)(),updatedAt:(0,i.O5)()}),console.log("useAuth: Firestore document CREATED for new social user: ".concat(e.uid));let a={id:s.id,email:s.email,name:s.name,isAdmin:s.isAdmin};d(a)}else console.warn("useAuth: User ".concat(e.uid," authenticated via non-social method but NO Firestore document. Forcing logout.")),await (0,l.CI)(r.j)}else console.log("useAuth: No Firebase user (logged out or initial state). Clearing authUser and firebaseUser states."),d(null),h(null)}catch(e){if(console.error("useAuth: CRITICAL ERROR inside processAuthStateChange:",e),d(null),h(null),r.j.currentUser){console.log("useAuth: Attempting to sign out Firebase user due to error in processAuthStateChange.");try{await (0,l.CI)(r.j)}catch(e){console.error("useAuth: Error attempting to sign out Firebase user after error in processAuthStateChange:",e)}}}finally{console.log("useAuth: processAuthStateChange - Bloco FINALLY. Definindo isLoading para FALSE."),f(!1)}},[]);(0,a.useEffect)(()=>{console.log("useAuth: Setting up onAuthStateChanged listener.");let e=(0,l.hg)(r.j,e=>{A(e)});return()=>{console.log("useAuth: Cleaning up onAuthStateChanged listener (AuthProvider unmounted)."),e()}},[A]);let x=(0,a.useCallback)(async()=>{console.log("useAuth: logout function called."),f(!0);try{await (0,l.CI)(r.j),console.log("useAuth: signOut successful. Navigating to homepage."),p.push("/")}catch(e){console.error("useAuth: Error during signOut: ",e),f(!1)}},[p]),g=(0,a.useCallback)(async()=>{console.log("useAuth: refreshAuthUser called.");let e=r.j.currentUser;console.log("useAuth: refreshAuthUser - current Firebase user from auth.currentUser:",e?e.uid:"null"),await A(e)},[A]),y=!m&&!!c&&!!u,v=!m&&null!=(t=null==c?void 0:c.isAdmin)&&t;return a.createElement(o.Provider,{value:{user:c,firebaseUser:u,isAuthenticated:y,isAdmin:v,isLoading:m,logout:x,refreshAuthUser:g}},s)}function d(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},66695:(e,t,s)=>{"use strict";s.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>o,Zp:()=>i,aR:()=>n,wL:()=>u});var a=s(95155),r=s(12115),l=s(59434);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});i.displayName="Card";let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...r})});n.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});o.displayName="CardTitle";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})});c.displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",s),...r})});d.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",s),...r})});u.displayName="CardFooter"},68098:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(40157).A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},73672:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(40157).A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},93498:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(40157).A)("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]])},94063:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(40157).A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,6073,6874,3796,2964,6257,2421,8441,1684,7358],()=>t(55574)),_N_E=e.O()}]);